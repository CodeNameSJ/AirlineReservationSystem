<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}" lang="en">
<head>
	<title>Search Flights</title>
	<div layout:fragment="head">
		<meta charset="utf-8"/>
	</div>
</head>
<body>
<div layout:fragment="content">
	<h1 class="page-title">Search Flights</h1>
	<div th:replace="~{fragments/searchForm :: searchForm}"></div>
	<hr/>
	<div id="searchResults">
		<table class="data-table">
			<thead>
			<tr>
				<th>Flight No</th>
				<th>Origin</th>
				<th>Destination</th>
				<th>Departure</th>
				<th>Arrival</th>
				<th>Price (Economy)</th>
				<th>Price (Business)</th>
				<th>Action</th>
			</tr>
			</thead>
			<tbody>
			<tr th:each="flight : ${flights}">
				<td th:text="${flight.flightNumber}"></td>
				<td th:text="${flight.origin}"></td>
				<td th:text="${flight.destination}"></td>
				<td th:text="${flight.departureDisplay}"></td>
				<td th:text="${flight.arrivalDisplay}"></td>
				<td th:text="${flight.priceEconomy}"></td>
				<td th:text="${flight.priceBusiness}"></td>
				<td>
					<a th:if="${session.userId != null}" th:href="@{/flight/{id}(id=${flight.id})}">
						<button class="button">Book</button>
					</a>
					<a th:unless="${session.userId != null}" th:href="@{/login}">
						<button class="button">Login to Book</button>
					</a>
				</td>
			</tr>
			</tbody>
		</table>
	</div>
</div>
<div layout:fragment="scripts"></div>
</body>
</html>