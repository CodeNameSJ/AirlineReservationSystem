<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      lang="en"
      layout:decorate="~{layout}">

<head>
	<title>Airline Reservation - Home</title>

	<div layout:fragment="head">
		<!-- <link rel="stylesheet" th:href="@{/css/home.css}"/> -->
	</div>
</head>

<div layout:fragment="content">
	<h2>Welcome, <span th:text="${session.username}">Username</span></h2>

	<h3>Your Bookings</h3>

	<table class="booking-table" aria-describedby="booking-info">
		<thead>
		<tr>
			<th>ID</th>
			<th>Flight</th>
			<th>Class</th>
			<th>Seats</th>
			<th>Status</th>
			<th>Action</th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="booking : ${bookings}">
			<td th:text="${booking.id}">1</td>
			<td th:text="${booking.flight.flightNumber}">FL123</td>
			<td th:text="${booking.seatClass}">Economy</td>
			<td th:text="${booking.seats}">2</td>
			<td th:text="${booking.status}">BOOKED</td>
			<td>
				<form th:if="${booking.status == 'BOOKED'}"
				      th:action="@{/user/bookings/cancel}" method="post" style="display:inline;">
					<input type="hidden" name="id" th:value="${booking.id}"/>
					<button class="tooltip" type="submit" aria-label="Cancel booking">
						<span class="tooltip-text">Cancel</span>
						<svg xmlns="http://www.w3.org/2000/svg" fill="none"
						     viewBox="0 0 24 24" stroke-width="1.5"
						     stroke="currentColor" width="24" height="24" aria-hidden="true">
							<path stroke-linecap="round" stroke-linejoin="round"
							      d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166
                                     m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077
                                     L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114
                                     1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916
                                     c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0
                                     c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667
                                     48.667 0 00-7.5 0"/>
						</svg>
					</button>
				</form>
				<span th:unless="${booking.status == 'BOOKED'}">â€”</span>
			</td>
		</tr>
		<tr th:if="${bookings == null or #lists.isEmpty(bookings)}">
			<td colspan="6" style="text-align:center; padding:12px;">You have no bookings.</td>
		</tr>
		</tbody>
	</table>
</div>

<!-- Optional page-specific scripts -->
<div layout:fragment="scripts">
	<!--  JS for this page if required -->
</div>

</html>